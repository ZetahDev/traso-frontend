---
import Layout from "../layouts/Layout.astro";

// Check authentication
const isAuthenticated = Astro.cookies.get("auth")?.value === "true";

// Handle form submission
if (Astro.request.method === "POST") {
  try {
    const formData = await Astro.request.formData();
    const afiliacionData = {
      // Datos Personales
      nombre: formData.get("nombre"),
      apellidos: formData.get("apellidos"),
      tipoDocumento: formData.get("tipoDocumento"),
      documento: formData.get("documento"),
      fechaNacimiento: formData.get("fechaNacimiento"),
      genero: formData.get("genero"),

      // Contacto
      email: formData.get("email"),
      telefono: formData.get("telefono"),
      whatsapp: formData.get("whatsapp"),

      // Ubicaci√≥n
      departamento: formData.get("departamento"),
      municipio: formData.get("municipio"),
      direccion: formData.get("direccion"),
      barrio: formData.get("barrio"),

      // Tipo de Afiliaci√≥n
      tipoAfiliacion: formData.get("tipoAfiliacion"),
      motivacion: formData.get("motivacion"),
      experiencia: formData.get("experiencia"),

      // Intereses
      comisionesInteres: formData.getAll("comisiones"),
      disponibilidad: formData.get("disponibilidad"),

      // T√©rminos
      aceptaTerminos: formData.get("aceptaTerminos"),
      aceptaDatos: formData.get("aceptaDatos"),
      unirseCanalWhatsApp: formData.get("unirseCanalWhatsApp"),
    };

    // TODO: Integrar con backend /api/auth/crear-usuario
    console.log("Datos de afiliaci√≥n:", afiliacionData);

    // Redirect to success page
    return Astro.redirect("/afiliacion/exito");
  } catch (error) {
    console.error("Error al procesar afiliaci√≥n:", error);
  }
}
---

<Layout title="Afiliaci√≥n - TRASO">
  <main class="afiliacion-page">
    <!-- Hero Section -->
    <section class="hero-afiliacion">
      <div class="container">
        <h1>√önete a TRASO</h1>
        <p class="subtitle">
          S√© parte de la transformaci√≥n social que Colombia necesita
        </p>
        <div class="steps-indicator">
          <div class="step active" data-step="1">
            <div class="step-number">1</div>
            <div class="step-label">Datos Personales</div>
          </div>
          <div class="step" data-step="2">
            <div class="step-number">2</div>
            <div class="step-label">Ubicaci√≥n</div>
          </div>
          <div class="step" data-step="3">
            <div class="step-number">3</div>
            <div class="step-label">Tipo de Afiliaci√≥n</div>
          </div>
          <div class="step" data-step="4">
            <div class="step-number">4</div>
            <div class="step-label">Confirmar</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Formulario Multi-Paso -->
    <section class="form-section">
      <div class="container-form">
        <form method="POST" class="afiliacion-form" id="afiliacionForm">
          <!-- Paso 1: Datos Personales -->
          <div class="form-step active" data-step="1">
            <h2>Datos Personales</h2>

            <div class="form-grid">
              <div class="form-group">
                <label for="nombre">Nombre(s) *</label>
                <input type="text" id="nombre" name="nombre" required />
              </div>

              <div class="form-group">
                <label for="apellidos">Apellidos *</label>
                <input type="text" id="apellidos" name="apellidos" required />
              </div>

              <div class="form-group">
                <label for="tipoDocumento">Tipo de Documento *</label>
                <select id="tipoDocumento" name="tipoDocumento" required>
                  <option value="">Seleccione...</option>
                  <option value="CC">C√©dula de Ciudadan√≠a</option>
                  <option value="CE">C√©dula de Extranjer√≠a</option>
                  <option value="TI">Tarjeta de Identidad</option>
                  <option value="PP">Pasaporte</option>
                </select>
              </div>

              <div class="form-group">
                <label for="documento">N√∫mero de Documento *</label>
                <input type="text" id="documento" name="documento" required />
              </div>

              <div class="form-group">
                <label for="fechaNacimiento">Fecha de Nacimiento *</label>
                <input
                  type="date"
                  id="fechaNacimiento"
                  name="fechaNacimiento"
                  required
                />
              </div>

              <div class="form-group">
                <label for="genero">G√©nero *</label>
                <select id="genero" name="genero" required>
                  <option value="">Seleccione...</option>
                  <option value="M">Masculino</option>
                  <option value="F">Femenino</option>
                  <option value="NB">No Binario</option>
                  <option value="O">Otro</option>
                  <option value="ND">Prefiero no decir</option>
                </select>
              </div>

              <div class="form-group full-width">
                <label for="email">Correo Electr√≥nico *</label>
                <input type="email" id="email" name="email" required />
              </div>

              <div class="form-group">
                <label for="telefono">Tel√©fono *</label>
                <input type="tel" id="telefono" name="telefono" required />
              </div>

              <div class="form-group">
                <label for="whatsapp">WhatsApp</label>
                <input
                  type="tel"
                  id="whatsapp"
                  name="whatsapp"
                  placeholder="Igual al tel√©fono"
                />
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-next" data-next="2"
                >Siguiente ‚Üí</button
              >
            </div>
          </div>

          <!-- Paso 2: Ubicaci√≥n -->
          <div class="form-step" data-step="2">
            <h2>Ubicaci√≥n</h2>

            <div class="form-grid">
              <div class="form-group">
                <label for="departamento">Departamento *</label>
                <select id="departamento" name="departamento" required>
                  <option value="">Seleccione...</option>
                  <option value="Antioquia">Antioquia</option>
                  <option value="Atlantico">Atl√°ntico</option>
                  <option value="Bogota">Bogot√° D.C.</option>
                  <option value="Bolivar">Bol√≠var</option>
                  <option value="Boyaca">Boyac√°</option>
                  <option value="Caldas">Caldas</option>
                  <option value="Caqueta">Caquet√°</option>
                  <option value="Cauca">Cauca</option>
                  <option value="Cesar">Cesar</option>
                  <option value="Cordoba">C√≥rdoba</option>
                  <option value="Cundinamarca">Cundinamarca</option>
                  <option value="Huila">Huila</option>
                  <option value="Meta">Meta</option>
                  <option value="Narino">Nari√±o</option>
                  <option value="Norte_Santander">Norte de Santander</option>
                  <option value="Risaralda">Risaralda</option>
                  <option value="Santander">Santander</option>
                  <option value="Tolima">Tolima</option>
                  <option value="Valle">Valle del Cauca</option>
                  <!-- Agregar m√°s departamentos -->
                </select>
              </div>

              <div class="form-group">
                <label for="municipio">Municipio *</label>
                <input type="text" id="municipio" name="municipio" required />
              </div>

              <div class="form-group full-width">
                <label for="direccion">Direcci√≥n *</label>
                <input
                  type="text"
                  id="direccion"
                  name="direccion"
                  required
                  placeholder="Calle, Carrera, #..."
                />
              </div>

              <div class="form-group full-width">
                <label for="barrio">Barrio/Vereda</label>
                <input type="text" id="barrio" name="barrio" />
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-prev" data-prev="1"
                >‚Üê Anterior</button
              >
              <button type="button" class="btn btn-next" data-next="3"
                >Siguiente ‚Üí</button
              >
            </div>
          </div>

          <!-- Paso 3: Tipo de Afiliaci√≥n -->
          <div class="form-step" data-step="3">
            <h2>Tipo de Afiliaci√≥n</h2>

            <div class="afiliacion-types">
              <label class="type-card">
                <input
                  type="radio"
                  name="tipoAfiliacion"
                  value="simpatizante"
                  required
                />
                <div class="type-content">
                  <div class="type-icon">üëã</div>
                  <h3>Simpatizante</h3>
                  <p>
                    Apoyas nuestras ideas y quieres mantenerte informado. Sin
                    compromisos obligatorios.
                  </p>
                  <ul class="benefits">
                    <li>‚úì Bolet√≠n mensual</li>
                    <li>‚úì Invitaciones a eventos</li>
                    <li>‚úì Acceso a recursos educativos</li>
                  </ul>
                </div>
              </label>

              <label class="type-card">
                <input
                  type="radio"
                  name="tipoAfiliacion"
                  value="militante"
                  required
                />
                <div class="type-content">
                  <div class="type-icon">üí™</div>
                  <h3>Militante</h3>
                  <p>
                    Participaci√≥n activa en actividades, asambleas y comisiones
                    del movimiento.
                  </p>
                  <ul class="benefits">
                    <li>‚úì Todo lo de simpatizante</li>
                    <li>‚úì Voz y voto en asambleas</li>
                    <li>‚úì Participaci√≥n en comisiones</li>
                    <li>‚úì Formaci√≥n continua gratuita</li>
                  </ul>
                </div>
              </label>

              <label class="type-card">
                <input
                  type="radio"
                  name="tipoAfiliacion"
                  value="lider"
                  required
                />
                <div class="type-content">
                  <div class="type-icon">üåü</div>
                  <h3>L√≠der Territorial</h3>
                  <p>
                    Coordinas actividades en tu territorio y construyes el
                    movimiento localmente.
                  </p>
                  <ul class="benefits">
                    <li>‚úì Todo lo de militante</li>
                    <li>‚úì Capacitaci√≥n en liderazgo</li>
                    <li>‚úì Recursos para organizaci√≥n</li>
                    <li>‚úì Apoyo del equipo nacional</li>
                  </ul>
                </div>
              </label>
            </div>

            <div class="form-grid mt-40">
              <div class="form-group full-width">
                <label for="motivacion"
                  >¬øPor qu√© quieres unirte a TRASO? *</label
                >
                <textarea
                  id="motivacion"
                  name="motivacion"
                  rows="4"
                  required
                  placeholder="Cu√©ntanos tu motivaci√≥n..."></textarea>
              </div>

              <div class="form-group full-width">
                <label for="experiencia"
                  >Experiencia en activismo/organizaci√≥n social</label
                >
                <textarea
                  id="experiencia"
                  name="experiencia"
                  rows="3"
                  placeholder="Organizaciones en las que has participado, causas que has apoyado, etc."
                ></textarea>
              </div>

              <div class="form-group full-width">
                <label
                  >¬øEn qu√© comisiones te gustar√≠a participar? (Selecciona todas
                  las que te interesen)</label
                >
                <div class="checkbox-group">
                  <label class="checkbox-item">
                    <input
                      type="checkbox"
                      name="comisiones"
                      value="justicia-social"
                    />
                    <span>Justicia Social</span>
                  </label>
                  <label class="checkbox-item">
                    <input
                      type="checkbox"
                      name="comisiones"
                      value="medio-ambiente"
                    />
                    <span>Medio Ambiente</span>
                  </label>
                  <label class="checkbox-item">
                    <input
                      type="checkbox"
                      name="comisiones"
                      value="educacion"
                    />
                    <span>Educaci√≥n y Cultura</span>
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" name="comisiones" value="salud" />
                    <span>Salud P√∫blica</span>
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" name="comisiones" value="genero" />
                    <span>G√©nero y Diversidad</span>
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" name="comisiones" value="vivienda" />
                    <span>Vivienda y H√°bitat</span>
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" name="comisiones" value="trabajo" />
                    <span>Trabajo y Econom√≠a</span>
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" name="comisiones" value="paz" />
                    <span>Paz y DDHH</span>
                  </label>
                </div>
              </div>

              <div class="form-group full-width">
                <label for="disponibilidad"
                  >Disponibilidad de tiempo semanal</label
                >
                <select id="disponibilidad" name="disponibilidad">
                  <option value="">Seleccione...</option>
                  <option value="1-2">1-2 horas</option>
                  <option value="3-5">3-5 horas</option>
                  <option value="6-10">6-10 horas</option>
                  <option value="10+">M√°s de 10 horas</option>
                </select>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-prev" data-prev="2"
                >‚Üê Anterior</button
              >
              <button type="button" class="btn btn-next" data-next="4"
                >Siguiente ‚Üí</button
              >
            </div>
          </div>

          <!-- Paso 4: Confirmar -->
          <div class="form-step" data-step="4">
            <h2>Confirmaci√≥n</h2>

            <div class="resumen-box">
              <h3>Resumen de tu Afiliaci√≥n</h3>
              <div id="resumenDatos"></div>
            </div>

            <div class="terminos-section">
              <label class="checkbox-item large">
                <input type="checkbox" name="aceptaTerminos" required />
                <span>
                  He le√≠do y acepto los <a href="/terminos" target="_blank"
                    >T√©rminos y Condiciones</a
                  >
                  y los <a href="/estatutos" target="_blank"
                    >Estatutos de TRASO</a
                  >
                </span>
              </label>

              <label class="checkbox-item large">
                <input type="checkbox" name="aceptaDatos" required />
                <span>
                  Autorizo el tratamiento de mis datos personales seg√∫n la
                  <a href="/politica-privacidad" target="_blank"
                    >Pol√≠tica de Privacidad</a
                  > y la Ley 1581 de 2012
                </span>
              </label>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-prev" data-prev="3"
                >‚Üê Anterior</button
              >
              <button type="submit" class="btn btn-submit"
                >Completar Afiliaci√≥n ‚úì</button
              >
            </div>
          </div>
        </form>
      </div>
    </section>

    <!-- Beneficios de Afiliarse -->
    <section class="beneficios-section">
      <div class="container">
        <h2>¬øPor qu√© afiliarte a TRASO?</h2>
        <div class="beneficios-grid">
          <div class="beneficio-card">
            <div class="beneficio-icon">üéì</div>
            <h3>Formaci√≥n Continua</h3>
            <p>
              Acceso gratuito a nuestra Escuela de Formaci√≥n Pol√≠tica con
              cursos, talleres y diplomados.
            </p>
          </div>
          <div class="beneficio-card">
            <div class="beneficio-icon">üó≥Ô∏è</div>
            <h3>Participaci√≥n Real</h3>
            <p>
              Voz y voto en las decisiones importantes del movimiento a trav√©s
              de asambleas democr√°ticas.
            </p>
          </div>
          <div class="beneficio-card">
            <div class="beneficio-icon">ü§ù</div>
            <h3>Red de Apoyo</h3>
            <p>
              Con√©ctate con miles de personas comprometidas con la
              transformaci√≥n social.
            </p>
          </div>
          <div class="beneficio-card">
            <div class="beneficio-icon">üì±</div>
            <h3>Herramientas Digitales</h3>
            <p>
              Plataforma digital para organizarte, participar y acceder a
              recursos.
            </p>
          </div>
          <div class="beneficio-card">
            <div class="beneficio-icon">üìä</div>
            <h3>Transparencia Total</h3>
            <p>
              Informaci√≥n clara sobre finanzas, decisiones y actividades del
              movimiento.
            </p>
          </div>
          <div class="beneficio-card">
            <div class="beneficio-icon">üéØ</div>
            <h3>Impacto Real</h3>
            <p>
              Participa en acciones concretas que generan cambios en tu
              comunidad.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>

<script>
  // Multi-step form logic
  let currentStep = 1;
  const totalSteps = 4;

  function updateStepIndicators() {
    document.querySelectorAll(".step").forEach((step) => {
      const stepNum = parseInt((step as HTMLElement).dataset.step || "0");
      step.classList.toggle("active", stepNum === currentStep);
      step.classList.toggle("completed", stepNum < currentStep);
    });
  }

  function showStep(stepNumber: number) {
    document.querySelectorAll(".form-step").forEach((step) => {
      step.classList.remove("active");
    });

    const targetStep = document.querySelector(
      `.form-step[data-step="${stepNumber}"]`
    );
    if (targetStep) {
      targetStep.classList.add("active");
      currentStep = stepNumber;
      updateStepIndicators();

      // Scroll to top
      window.scrollTo({ top: 0, behavior: "smooth" });

      // If last step, show summary
      if (stepNumber === 4) {
        updateResumen();
      }
    }
  }

  function updateResumen() {
    const form = document.getElementById("afiliacionForm") as HTMLFormElement;
    const formData = new FormData(form);

    const nombre = formData.get("nombre");
    const apellidos = formData.get("apellidos");
    const documento = formData.get("documento");
    const email = formData.get("email");
    const telefono = formData.get("telefono");
    const departamento = formData.get("departamento");
    const municipio = formData.get("municipio");
    const tipoAfiliacion = formData.get("tipoAfiliacion");

    const resumenHTML = `
      <div class="resumen-item"><strong>Nombre:</strong> ${nombre} ${apellidos}</div>
      <div class="resumen-item"><strong>Documento:</strong> ${documento}</div>
      <div class="resumen-item"><strong>Email:</strong> ${email}</div>
      <div class="resumen-item"><strong>Tel√©fono:</strong> ${telefono}</div>
      <div class="resumen-item"><strong>Ubicaci√≥n:</strong> ${municipio}, ${departamento}</div>
      <div class="resumen-item"><strong>Tipo de Afiliaci√≥n:</strong> ${tipoAfiliacion}</div>
    `;

    const resumenContainer = document.getElementById("resumenDatos");
    if (resumenContainer) {
      resumenContainer.innerHTML = resumenHTML;
    }
  }

  // Event listeners
  document.addEventListener("DOMContentLoaded", () => {
    // Next buttons
    document.querySelectorAll(".btn-next").forEach((btn) => {
      btn.addEventListener("click", (e) => {
        const target = e.target as HTMLElement;
        const nextStep = parseInt(target.dataset.next || "0");

        // Validate current step
        const currentStepElement = document.querySelector(
          `.form-step[data-step="${currentStep}"]`
        );
        if (currentStepElement) {
          const inputs = currentStepElement.querySelectorAll(
            "input[required], select[required], textarea[required]"
          );
          let valid = true;

          inputs.forEach((input) => {
            if (!(input as HTMLInputElement).checkValidity()) {
              (input as HTMLInputElement).reportValidity();
              valid = false;
            }
          });

          if (valid) {
            showStep(nextStep);
          }
        }
      });
    });

    // Previous buttons
    document.querySelectorAll(".btn-prev").forEach((btn) => {
      btn.addEventListener("click", (e) => {
        const target = e.target as HTMLElement;
        const prevStep = parseInt(target.dataset.prev || "0");
        showStep(prevStep);
      });
    });

    // Auto-fill WhatsApp with phone number
    const telefonoInput = document.getElementById(
      "telefono"
    ) as HTMLInputElement;
    const whatsappInput = document.getElementById(
      "whatsapp"
    ) as HTMLInputElement;

    if (telefonoInput && whatsappInput) {
      telefonoInput.addEventListener("blur", () => {
        if (!whatsappInput.value) {
          whatsappInput.value = telefonoInput.value;
        }
      });
    }
  });
</script>

<style>
  .afiliacion-page {
    min-height: 100vh;
    background: #f8f9fa;
  }

  .hero-afiliacion {
    background: linear-gradient(135deg, #3b5998 0%, #2d4373 100%);
    color: white;
    padding: 100px 20px 60px;
    text-align: center;
  }

  .hero-afiliacion h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .hero-afiliacion .subtitle {
    font-size: 1.3rem;
    opacity: 0.95;
    margin-bottom: 3rem;
  }

  .steps-indicator {
    display: flex;
    justify-content: center;
    gap: 30px;
    max-width: 800px;
    margin: 0 auto;
  }

  .step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    opacity: 0.5;
    transition: all 0.3s ease;
  }

  .step.active,
  .step.completed {
    opacity: 1;
  }

  .step-number {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    font-weight: bold;
    border: 3px solid rgba(255, 255, 255, 0.5);
  }

  .step.active .step-number {
    background: white;
    color: #3b5998;
    border-color: white;
  }

  .step.completed .step-number {
    background: #27ae60;
    border-color: #27ae60;
  }

  .step-label {
    font-size: 0.9rem;
    font-weight: 500;
  }

  /* Form Section */
  .form-section {
    padding: 60px 20px;
  }

  .container-form {
    max-width: 900px;
    margin: 0 auto;
  }

  .afiliacion-form {
    background: white;
    padding: 50px;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  }

  .form-step {
    display: none;
  }

  .form-step.active {
    display: block;
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .form-step h2 {
    font-size: 2rem;
    color: #2d4373;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 3px solid #3b5998;
  }

  .form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
    margin-bottom: 30px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-group.full-width {
    grid-column: 1 / -1;
  }

  .form-group label {
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
    font-size: 0.95rem;
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    padding: 12px 15px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 1rem;
    transition: all 0.3s ease;
    font-family: inherit;
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: #3b5998;
    box-shadow: 0 0 0 3px rgba(59, 89, 152, 0.1);
  }

  /* Afiliacion Types */
  .afiliacion-types {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }

  .type-card {
    cursor: pointer;
  }

  .type-card input[type="radio"] {
    display: none;
  }

  .type-content {
    border: 3px solid #e0e0e0;
    padding: 25px;
    border-radius: 12px;
    height: 100%;
    transition: all 0.3s ease;
  }

  .type-card:hover .type-content {
    border-color: #3b5998;
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(59, 89, 152, 0.2);
  }

  .type-card input[type="radio"]:checked + .type-content {
    border-color: #3b5998;
    background: linear-gradient(135deg, #f8f9fa 0%, #e8eef5 100%);
    box-shadow: 0 8px 25px rgba(59, 89, 152, 0.3);
  }

  .type-icon {
    font-size: 3rem;
    margin-bottom: 15px;
  }

  .type-content h3 {
    font-size: 1.4rem;
    color: #2d4373;
    margin-bottom: 10px;
  }

  .type-content p {
    color: #666;
    margin-bottom: 15px;
    line-height: 1.6;
  }

  .benefits {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .benefits li {
    padding: 5px 0;
    color: #27ae60;
    font-size: 0.9rem;
    font-weight: 500;
  }

  /* Checkbox Group */
  .checkbox-group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
  }

  .checkbox-item {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    padding: 10px;
    border-radius: 8px;
    transition: background 0.2s ease;
  }

  .checkbox-item:hover {
    background: #f8f9fa;
  }

  .checkbox-item input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
  }

  .checkbox-item.large {
    padding: 15px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    margin-bottom: 15px;
  }

  .checkbox-item.large:hover {
    border-color: #3b5998;
  }

  /* Resumen */
  .resumen-box {
    background: #f8f9fa;
    padding: 30px;
    border-radius: 12px;
    margin-bottom: 30px;
  }

  .resumen-box h3 {
    color: #2d4373;
    margin-bottom: 20px;
    font-size: 1.5rem;
  }

  .resumen-item {
    padding: 10px 0;
    border-bottom: 1px solid #e0e0e0;
  }

  .resumen-item:last-child {
    border-bottom: none;
  }

  .resumen-item strong {
    color: #2d4373;
    margin-right: 10px;
  }

  /* T√©rminos */
  .terminos-section {
    margin-bottom: 30px;
  }

  .terminos-section a {
    color: #3b5998;
    font-weight: 600;
  }

  .whatsapp-opt {
    background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #27ae60;
  }

  .whatsapp-opt strong {
    color: #27ae60;
  }

  /* Form Actions */
  .form-actions {
    display: flex;
    justify-content: space-between;
    gap: 15px;
    padding-top: 20px;
    border-top: 2px solid #f0f0f0;
  }

  .btn {
    padding: 15px 35px;
    font-size: 1.1rem;
    font-weight: 600;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .btn-next,
  .btn-submit {
    background: linear-gradient(135deg, #3b5998 0%, #2d4373 100%);
    color: white;
    margin-left: auto;
  }

  .btn-next:hover,
  .btn-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(59, 89, 152, 0.4);
  }

  .btn-prev {
    background: #e0e0e0;
    color: #333;
  }

  .btn-prev:hover {
    background: #d0d0d0;
  }

  .mt-40 {
    margin-top: 40px;
  }

  /* Beneficios Section */
  .beneficios-section {
    padding: 80px 20px;
    background: white;
  }

  .beneficios-section .container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .beneficios-section h2 {
    font-size: 2.5rem;
    color: #2d4373;
    text-align: center;
    margin-bottom: 50px;
  }

  .beneficios-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
  }

  .beneficio-card {
    text-align: center;
    padding: 30px;
    background: #f8f9fa;
    border-radius: 12px;
    transition: all 0.3s ease;
  }

  .beneficio-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }

  .beneficio-icon {
    font-size: 3rem;
    margin-bottom: 15px;
  }

  .beneficio-card h3 {
    font-size: 1.3rem;
    color: #2d4373;
    margin-bottom: 10px;
  }

  .beneficio-card p {
    color: #666;
    line-height: 1.6;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .hero-afiliacion h1 {
      font-size: 2rem;
    }

    .steps-indicator {
      flex-wrap: wrap;
      gap: 15px;
    }

    .step-label {
      font-size: 0.8rem;
    }

    .afiliacion-form {
      padding: 30px 20px;
    }

    .form-grid,
    .afiliacion-types,
    .checkbox-group {
      grid-template-columns: 1fr;
    }

    .form-actions {
      flex-direction: column;
    }

    .btn-next,
    .btn-submit {
      margin-left: 0;
    }
  }
</style>
